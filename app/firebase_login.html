<!DOCTYPE html>
<html>

<head>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-auth-compat.js"></script>
</head>

<body>
    <input id="email" placeholder="Email"><br>
    <input id="password" type="password" placeholder="Password"><br>
    <button onclick="login()">Đăng nhập</button>
    <pre id="output"></pre>
    <script>
        // Thay bằng config của bạn!
        const firebaseConfig = {
                apiKey: "AIzaSyBZCwLqhhkRm0_G1rOHBhc8ffV7RekdiHU",
                authDomain: "stockinsights-840d9.firebaseapp.com",
                projectId: "stockinsights-840d9",
                storageBucket: "stockinsights-840d9.firebasestorage.app",
                messagingSenderId: "585866525295",
                appId: "1:585866525295:web:ccfe3c1f16873802086b9a",
                measurementId: "G-NCTDVJ3HM2"
            };
        firebase.initializeApp(firebaseConfig);

        function login() {
            var email = document.getElementById('email').value;
            var pass = document.getElementById('password').value;
            firebase.auth().signInWithEmailAndPassword(email, pass)
                .then(userCredential => userCredential.user.getIdToken())
                .then(token => {
                    // Đưa token lên LocalStorage cho Streamlit lấy qua JS
                    localStorage.setItem("firebase_id_token", token);
                    document.getElementById('output').innerText = "Đăng nhập thành công!";
                })
                .catch(e => {
                    document.getElementById('output').innerText = e.message;
                });
        }
    </script>
</body>

</html>
